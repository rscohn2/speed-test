variables:
  online_url: 'http://registrationcenter-download.intel.com/akdlm/irc_nas/tec/15537/parallel_studio_xe_2019_update4_composer_edition_online.tgz'
  offline_url: 'http://registrationcenter-download.intel.com/akdlm/irc_nas/tec/15537/parallel_studio_xe_2019_update4_composer_edition.tgz'

trigger:
- master

strategy:
  matrix:
    linux_online:
      imageName: 'ubuntu-latest'
      python_bin: 'python3'
      url:  $(online_url)
    windows_online:
      imageName: 'vs2017-win2016'
      python_bin: 'C:/Miniconda/python.exe'
      url:  $(online_url)
    linux_offline:
      imageName: 'ubuntu-latest'
      python_bin: 'python3'
      url:  $(offline_url)
    windows_offline:
      imageName: 'vs2017-win2016'
      python_bin: 'C:/Miniconda/python.exe'
      url:  $(offline_url)


pool:
  vmImage: $(imageName)

steps:
- script: |
    $(python_bin) speed-test.py --request $(url)
  displayName: online